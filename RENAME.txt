ending 锁是一个 sync.Mutex 类型的互斥锁，用于保护在发送响应时对共享资源的访问。它被用于两个地方：

在 sendResponse 函数中，通过调用 sending.Lock() 来获取锁，在发送响应之前锁住资源，确保同一时间只有一个 goroutine 能够发送响应。
在 sendResponse 函数中，通过调用 sending.Unlock() 来释放锁，在发送完响应后解锁资源，允许其他 goroutine 访问和发送响应。
这样做是为了确保在并发情况下，不会发生多个 goroutine 同时访问和发送响应的情况，从而避免竞态条件和数据损坏。



wg 是一个 sync.WaitGroup 类型的等待组，用于等待所有的请求处理完成。它被用于三个地方：

在主循环中的 wg.Add(1) 语句用于向等待组添加一个等待的任务，表示有一个请求正在被处理。
在 handleRequest 函数中的 defer wg.Done() 语句用于在请求处理完成时通知等待组，表示一个请求已经处理完成。
在主循环结束后的 wg.Wait() 语句用于等待所有的请求处理完成，即等待等待组中的所有任务都被标记为完成。